## 3D数学基础

### 向量

向量： 向量是有长度有方向

#### 向量的运算

##### 向量的长度

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027173721930.png" alt="image-20221027173721930" style="zoom:25%;" />

##### 标量与向量的乘法

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174342545.png" alt="image-20221027174342545" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174359823.png" alt="image-20221027174359823" style="zoom:25%;" />

##### 单位向量，标准化向量

把向量的单位统一变成范围1 内，向量的每一个值都除以 向量的长度

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174652046.png" alt="image-20221027174652046" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174707469.png" alt="image-20221027174707469" style="zoom:25%;" />

##### 向量的加法和减法

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174813961.png" alt="image-20221027174813961" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027174908770.png" alt="image-20221027174908770" style="zoom:25%;" />

##### 通过向量的减法，求两点之间的距离

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027175152931.png" alt="image-20221027175152931" style="zoom:25%;" />

##### 向量的点乘

点乘得到的是一个标量

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027181310845.png" alt="image-20221027181310845" style="zoom:25%;" />

向量的点乘可以用来 求 两个 向量之间的 夹角

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027183155188.png" alt="image-20221027183155188" style="zoom:25%;" />

通过向量的点乘可以判断两个向量是否是同一方向

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027181807496.png" alt="image-20221027181807496" style="zoom:25%;" />

##### 向量的叉乘

向量的叉乘结果是另外一个向量

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027182047271.png" alt="image-20221027182047271" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027182112140.png" alt="image-20221027182112140" style="zoom:33%;" />

向量叉乘的应用

1. 可以通过 向量 a 和 向量 b 叉乘得到一个垂直与两个向量的 一个新向量

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027182243587.png" alt="image-20221027182243587" style="zoom:25%;" />

2. 对向量 a和b 的叉乘 去模 得到的值 是 向量 a 和向量 b 组成的一个平行四边学的面积

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221027182453128.png" alt="image-20221027182453128" style="zoom: 25%;" />



### 矩阵

#### 举证的乘法

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028100037491.png" alt="image-20221028100037491" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028100253575.png" alt="image-20221028100253575" style="zoom:25%;" />

1. **矩阵乘法的 第一个矩阵行数决定行数 ， 第二个矩阵的列数决定列数**
2. 相乘的结果就是 第r行和第c列的值 为 第一个矩阵的第r行与第二个矩阵

#### 行向量和列向量相乘

一个是 行乘没一列 一个列乘以每一行

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028100920751.png" alt="image-20221028100920751" style="zoom:25%;" />

矩阵帮我们将物体进行 变换

### 矩阵乘法编程

#### 3x3矩阵乘法

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028101630909.png" alt="image-20221028101630909" style="zoom:33%;" />

#### 行向量要在左乘

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028110303477.png" alt="image-20221028110303477" style="zoom:25%;" />

### 矩阵和线性变换_旋转

#### 旋转

旋转矩阵计算方式， 首先我们用的是行向量与矩阵相乘，然后用两个特殊的向量 x 值为 0 的向量 和 y 为 0 的向量都向正方向旋转一定角度进行计算得到这个计算得到的值

> 求两个值需要两个等式，使用两个特殊的单位向量方便计算

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028155033354.png" alt="image-20221028155033354" style="zoom:25%;" />

下面的都是左手坐标系的值， 

3dx轴旋转

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221031103402810.png" alt="image-20221031103402810" style="zoom:25%;" />

3dy轴旋转

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221031103930544.png" alt="image-20221031103930544" style="zoom:25%;" />

3dz轴旋转

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101145217279.png" alt="image-20221101145217279" style="zoom:25%;" />

#### 两种坐标系

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221028155310600.png" alt="image-20221028155310600" style="zoom:25%;" />

左手坐标系 中指指向自己就是各个轴上的正方向 然后握拳向上就是旋转的正方向

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221031100759168.png" alt="image-20221031100759168" style="zoom:25%;" />

右手坐标系 中指指向自己是各个轴上正方向

#### 扩展

3d绕任意轴的旋转矩阵

> 但是因为一个物体的点太多 计算起来会十分复杂，不采用，替换方法使用欧拉角解决



### 矩阵和线性变换_缩放

#### 缩放

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101151047733.png" alt="image-20221101151047733" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101151157006.png" alt="image-20221101151157006" style="zoom:25%;" />

#### 投影

##### 正向投影

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101151849231.png" alt="image-20221101151849231" style="zoom:25%;" />

投影到 x y  z 轴组成的平面 上的 投影矩阵

##### 投影到任意一个平面上

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101151958927.png" alt="image-20221101151958927" style="zoom:25%;" />

这里的 n 是垂直与这个任意平面的一个单位向量



### 矩阵和线性变换_镜切

#### 镜像

3d空间中的任意平面的镜像

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101152350281.png" alt="image-20221101152350281" style="zoom:25%;" />

描述一个平面不是很好描述，但是可以用向量来描述，比如这里的 n 就是一个垂直与这个平面的单位向量 n [ x, y, z]

#### 切变

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101153508595.png" alt="image-20221101153508595" style="zoom:25%;" />



### 矩阵的行列式

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101153759034.png" alt="image-20221101153759034" style="zoom:25%;" />

只有方阵才存在行列式

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101153911335.png" alt="image-20221101153911335" style="zoom:25%;" />

2d行列式 计算平行四边形的面积

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101154225277.png" alt="image-20221101154225277" style="zoom:25%;" />

3d行列式 计算得到几何体的面积

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101154304029.png" alt="image-20221101154304029" style="zoom:25%;" />

### 矩阵的逆

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101154900953.png" alt="image-20221101154900953" style="zoom:25%;" />

.... 超出我的范围来啊 

工作中的应用 用来 进行 **撤销操作**

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101155302953.png" alt="image-20221101155302953" style="zoom:25%;" />



### 正交矩阵

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101155457325.png" alt="image-20221101155457325" style="zoom:25%;" />

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101155706624.png" alt="image-20221101155706624" style="zoom:25%;" />

### 齐次矩阵

4x4 矩阵

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101163242092.png" alt="image-20221101163242092" style="zoom:25%;" />

### 旋转的三种表示方式

+ 矩阵
+ 欧拉角
+ 四元数

绕y轴旋转90度

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101163651354.png" alt="image-20221101163651354" style="zoom:33%;" />

### 欧拉角

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101172210431.png" alt="image-20221101172210431" style="zoom:67%;" />

绕着三个垂直的坐标轴旋转

垂直的轴旋转， 飞机左右旋转

![image-20221101172416548](/Users/adong/Library/Application Support/typora-user-images/image-20221101172416548.png)

x轴旋转。飞机头 再上下的转

![image-20221101172521448](/Users/adong/Library/Application Support/typora-user-images/image-20221101172521448.png)

绕z轴转 飞机机翼 翻滚

![image-20221101172608727](/Users/adong/Library/Application Support/typora-user-images/image-20221101172608727.png)

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101172642757.png" alt="image-20221101172642757" style="zoom:25%;" />

缺点：

+ 万向锁的问题



### 万向锁现象

万向锁：当我们选择 pitch 角为 正负90度的时候， 就被限制在只能绕垂直轴进行旋转， 就是 选择的顺序 x, y ,z 不管是那种顺序 都会存在两个轴重叠在一起的时候



### RotationMatrix

物体坐标系 和 惯性坐标系之间  旋转变换

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101174754050.png" alt="image-20221101174754050" style="zoom:33%;" />

从世界坐标系到物体坐标系 

<img src="/Users/adong/Library/Application Support/typora-user-images/image-20221101174910736.png" alt="image-20221101174910736" style="zoom:50%;" />

世界坐标系平移 得到 惯性坐标系的原点 与 物体坐标系的原点是相同的， 惯性坐标系的坐标轴 与世界坐标系的坐标轴是平行的

惯性坐标系到 物体坐标系，原点重合 只需要旋转



#### 向量在两个坐标系之间的转换 惯性和物体



